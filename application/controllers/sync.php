<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

	class Sync extends CI_Controller {
		
		function __construct()
		{
			parent::__construct();
			
			
			$this->tweet->enable_debug(TRUE);

			
			if ( !$this->tweet->logged_in() )
			{
				//redirect('/auth');
				
				$this->tweet->set_callback(site_url('/sync'));
				
				$this->tweet->login();
				
			}else{
				$tokens = $this->tweet->get_tokens();
				$this->tweet->set_tokens($tokens);
			}

		}
		
		function index()
		{
			$this->load->view('header');
			echo '<a href="'.site_url('/reset/follows').'">wanna reset follows?</a>';
			$this->load->view('footer');
		}
		
		function with_batuhan()
		{
			$this->load->view('header');
			
			$batuhans_follow_list = '262055899,391332990,350171625,331249800,311031599,387599234,374616156,29479819,349529562,22705327,376054519,53391121,223591872,142055380,96373141,332830834,24588422,172691127,334647662,371813089,108059622,45828832,100983423,52426815,329301764,9751122,251229617,206774125,29791346,159186542,77189940,377895211,377654678,167228984,79530003,376409402,306745725,362517547,18363508,134447343,375782644,356734834,374516279,374396544,307574972,73108433,14481313,279662191,167099839,362342800,197747302,111045140,95185860,8064292,361908581,366566387,190314184,361180310,272181358,361895499,182836589,118341342,15369957,362739866,8632782,361183004,361458084,361457425,361456191,361453925,47746811,11524072,83688200,360580232,17467258,358488639,106212088,24499123,34234435,68038951,231560830,226798664,31657845,107085178,352041270,190284219,354441649,334797915,353841965,353611682,214390724,14395002,138579984,272356382,281436384,175736623,215561574,351473953,259261958,46182277,211584958,133617438,157719607,19454724,198282398,263519867,75004873,14777162,9204902,303423806,346794217,137746592,11883132,117190199,104950886,55843285,43670336,151838427,343599867,24548510,343337994,84862637,109228830,55499236,341963723,339558022,108419162,249797085,331455086,338940658,77569089,337312764,338205335,126050027,19058479,189575632,119488268,81422967,173992578,206094673,336977969,18103492,334513230,41242962,93206560,22902984,93257719,93064665,85049866,65872038,67546072,83658346,333287964,213178111,173798930,330575420,26466595,330351855,100577970,73406941,48397309,187505997,31510124,281755799,321832458,314550261,320654067,293602056,15274083,311761863,311074428,258028478,17236066,307267151,306949186,101537086,304306535,15452672,46792154,45702502,247314662,268415783,208392640,299041570,298597448,295355123,80356469,49469201,236159968,289018009,22887768,111809661,267186871,14865719,276163669,216627458,261609245,261688055,263151754,14578040,257377753,15274565,260906544,255663529,52714780,14386185,15787130,257862695,86275666,62767264,255671539,255592878,56141959,253183009,232052113,250586670,249062597,156033266,44870846,15902690,17988623,215724404,15198002,61976508,241869633,237697625,15179125,181276229,238131138,200190458,231780777,99178672,168448785,166942369,220723459,219427972,157275508,225772660,228207534,59470606,112566776,32463842,118121927,161793050,226135949,17093617,221124235,17088819,17701592,12506302,188253857,218520821,124228810,106724464,64171976,216139640,127261215,125435663,165452022,82376933,69151663,15005416,17484550,14970224,215259804,186042499,213806427,19490555,170857921,36173996,65655500,122450907,105209546,211924507,122659678,166980780,29101994,210955007,110809118,98086289,30194909,90867110,18981470,91431819,208451433,201227724,207408663,208159215,206216056,207901527,207433775,207675495,173495926,206838122,207418655,204213405,206096075,141840469,186490993,180124158,195326864,202263465,194480228,204235309,205815622,23814213,23431093,154183721,178039157,120863026,15738256,190353903,135937369,49692305,178086970,23964755,202718926,66723678,195921467,199723079,16879571,123504650,97311414,20189768,18338033,175494439,91471635,179416092,196674730,22599645,201115810,187673854,193463119,199050813,28110276,36592661,36289411,34896516,200893161,15688958,86148766,26230545,15895479,199711984,68788163,44208019,88617044,15071717,196973184,19024110,17185390,174661207,16072207,16674392,58809331,51070819,193196169,142194958,110786188,26873926,14636110,70627886,192658464,175506903,14688680,191857434,191126043,190176956,93307811,189088218,14921399,155152013,165196963,190016242,16424881,68257343,189839615,188782304,181560504,16590061,160460701,187465220,89404887,92845649,185570855,133782002,176944922,16049492,183353463,182425581,11630782,45499145,181561947,181198619,181163019,72012994,180977595,145323272,172102714,180051702,103038217,176081561,155299081,144154227,179850566,174777597,179447487,9499882,15395474,107745463,17389036,54637089,171447151,17074738,16980399,176700109,22760053,15029774,3509041,176078728,173773494,63650956,170707641,170824326,68498482,167698895,146876693,162713844,162421987,155361296,36963249,153028690,149239257,99470198,113396696,112160661,122372931,146070697,146060435,137832494,145332377,140272517,100252493,93755714,46069626,143535190,42616332,139693835,139390778,97442688,119367724,129008866,115901925,111831301,112738792,116378151,39966777,115302322,38924819,110696017,87441988,92161715,42720293,15922918,15688992,68997311,111030687,96394324,110989843,24498190,86577758,106166036,18481950,66786999,82147688,100272289,87291785,99623183,97231201,15665473,96326141,66650224,41172051,96621635,44319936,25743051,60821066,17652312,91875583,15932164,92607903,46163902,36099854,18272386,14818196,93689171,92845537,19656745,88630952,71223706,82592016,37164617,30873550,78528851,51616687,32620922,73086391,70381538,70380979,70381323,70381093,70380364,70380733,70380568,1926551,22460332,47302245,62394724,34765802,59631781,58088193,50304689,55828114,39580787,54480476,46870999,48633701,48784242,39198770,45128280,23815544,43490963,45127245,22154822,43061320,22899705,43744117,40288368,41775552,18804625,36012027,35445591,40878370,18810071,37424863,38227582,23189959,35554429,32460273,15112603,18210872,18284219,14398768,28331232,32685265,24060778,30501044,24889605,25241046,6660662,23749417,23803714,14618103,14617999,14820411,22820859,20150142';
			
			$batuhans_follow_list = explode(',', $batuhans_follow_list);
			
			if( ! isset($batuhans_follow_list) ){ echo '<h2>opps! something is wrong. can you please try again later?</h2>'; }
			else{

				foreach($batuhans_follow_list as $user){
					
					$person_to_follow = array(
						'user_id' => $user
					);

					$follow = $this->tweet->call('post', 'friendships/create', $person_to_follow);
				}
				echo '<h1>done!</h1>';
			}
			
			$this->load->view('footer');
		}
	}